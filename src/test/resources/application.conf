# test configuration

sitebag {
  porter.embedded {
    # mutable and read-only store implementations can be specified here.
    stores = [
      { class: "porter.app.ConfigStore", params: ${sitebag.teststore} },
      { class: "porter.app.MongoStore", params: { uri = ${sitebag.mongodb-url}, dbname = ${sitebag.dbname} }, realms: [] }
    ]
  }

  # password 'test' = bcrypt$$2a$12$LMVMCfk1nAkrMl4NrgoeaeAvN7mmugCvWJN6RpRul5rGDHYxbQhg2
  teststore {
    default: {
      name: "test default relam"
      groups: {
        admin: {
          rules: [ "sitebag:createuser" ]
          props: {}
        }
      }
      accounts: {
        admin: {
          secret: "bcrypt$$2a$12$LMVMCfk1nAkrMl4NrgoeaeAvN7mmugCvWJN6RpRul5rGDHYxbQhg2"
          groups: [ "admin", "user" ]
          props: {}
        }
        nobody: {
          secret: "bcrypt$$2a$12$LMVMCfk1nAkrMl4NrgoeaeAvN7mmugCvWJN6RpRul5rGDHYxbQhg2"
          groups: []
          props: {}
        }
      }
    }
  }
}